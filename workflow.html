<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated Policy Processing Workflow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, var(--mha-blue, #217593) 0%, var(--mha-pink, #d4007f) 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .app-layout {
            display: grid;
            grid-template-columns: 220px 1fr 340px;
            gap: 20px;
            width: 100%;
            max-width: 1400px;
        }

        .left-panel {
            background: var(--mha-pink, #d4007f);
            color: #ffffff;
            border-radius: var(--radius-lg, 12px);
            padding: 24px 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: var(--shadow-lg, 0 20px 40px rgba(0,0,0,0.1));
        }

        .sidebar-logo {
            width: 140px;
            height: auto;
        }

        .center-panel {
            min-width: 0;
        }

        .right-panel {
            background: var(--color-background, #ffffff);
            border-radius: var(--radius-lg, 12px);
            padding: 20px;
            box-shadow: var(--shadow-lg, 0 20px 40px rgba(0,0,0,0.1));
            min-width: 280px;
        }

        .workflow-container {
            background: white;
            border-radius: var(--radius-lg, 12px);
            padding: 30px;
            box-shadow: var(--shadow-lg, 0 20px 40px rgba(0,0,0,0.1));
            max-width: 1000px;
            width: 100%;
        }

        .workflow-title {
            text-align: center;
            font-size: 24px;
            font-weight: 600;
            color: var(--mha-blue, #217593);
            margin-bottom: 30px;
        }

        .brand-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
        }

        .brand-logo {
            height: 48px;
            width: auto;
            border-radius: 6px;
            box-shadow: var(--shadow-sm, 0 4px 12px rgba(0,0,0,0.1));
        }

        .demo-section {
            margin-bottom: 30px;
            text-align: center;
        }

        .draggable-document {
            display: inline-block;
            background: white;
            border: 2px solid var(--color-border, #dddddd);
            border-radius: 8px;
            padding: 15px 20px;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm, 0 4px 12px rgba(0,0,0,0.1));
            user-select: none;
        }

        .draggable-document:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md, 0 8px 25px rgba(0,0,0,0.15));
            border-color: var(--mha-blue, #217593);
        }

        .draggable-document:active {
            cursor: grabbing;
            transform: rotate(5deg) scale(0.95);
        }

        .draggable-document.dragging {
            opacity: 0.5;
            transform: rotate(5deg) scale(0.9);
        }

        .doc-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .doc-name {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }

        .doc-hint {
            font-size: 12px;
            color: #6b7280;
            font-style: italic;
        }

        .node.drop-target {
            border-color: var(--mha-teal, #6bbbae) !important;
            background: var(--mha-teal-10, #f0f9f7) !important;
            transform: scale(1.05) !important;
            box-shadow: 0 0 0 3px rgba(107, 187, 174, 0.2) !important;
        }

        .workflow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            position: relative;
        }

        .node {
            background: white;
            border: 2px solid var(--color-border-light, #eaeaea);
            border-radius: 8px;
            padding: 20px;
            min-width: 280px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: var(--shadow-sm, 0 4px 12px rgba(0,0,0,0.1));
        }

        .node:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md, 0 8px 25px rgba(0,0,0,0.15));
            border-color: var(--mha-blue, #217593);
        }

        .node.processing {
            border-color: var(--mha-teal, #6bbbae);
            background: var(--mha-teal-10, #f0f9f7);
            transform: scale(1.05);
        }

        .node-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 10px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: white;
        }

        .trigger .node-icon { background: var(--mha-teal, #6bbbae); }
        .action .node-icon { background: var(--mha-blue, #217593); }
        .processing .node-icon { background: var(--mha-pink, #d4007f); }
        .vector .node-icon { background: var(--mha-teal, #6bbbae); }
        .notification .node-icon { background: var(--mha-pink, #d4007f); }
        .final .node-icon { background: var(--mha-light-blue, #a7c9d7); }

        .node-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary, #333333);
            margin-bottom: 8px;
        }

        .node-description {
            font-size: 14px;
            color: var(--color-text-secondary, #666666);
            line-height: 1.4;
        }

        .connection {
            width: 2px;
            height: 40px;
            background: linear-gradient(to bottom, var(--color-border-light, #eaeaea), var(--color-border, #dddddd));
            position: relative;
            animation: flow 2s infinite;
            transition: all 0.5s ease;
        }

        .connection.active {
            background: linear-gradient(to bottom, var(--mha-teal, #6bbbae), #4aa394);
            animation: activeFlow 1s infinite;
        }

        .connection::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: -3px;
            width: 8px;
            height: 8px;
            background: var(--mha-blue, #217593);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .connection.active::after {
            background: var(--mha-teal, #6bbbae);
            animation: activePulse 0.8s infinite;
        }

        @keyframes flow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        @keyframes activeFlow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        @keyframes activePulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.4); opacity: 1; }
        }

        .final-nodes {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .final-nodes .node {
            min-width: 200px;
        }

        .explanation {
            background: var(--color-background-light, #f9f9f9);
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
            border-left: 4px solid var(--mha-blue, #217593);
        }

        .explanation h3 {
            color: #1f2937;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .explanation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .explanation-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--color-border, #dddddd);
        }

        .explanation-item strong {
            color: var(--color-text-primary, #333333);
            display: block;
            margin-bottom: 5px;
        }

        .explanation-item span {
            color: var(--color-text-secondary, #666666);
            font-size: 14px;
        }

        .status-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 12px;
            height: 12px;
            background: var(--mha-teal, #6bbbae);
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        @media (max-width: 768px) {
            .final-nodes {
                flex-direction: column;
            }
            
            .workflow-container {
                padding: 20px;
            }
            
            .explanation-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
        <div class="app-layout">
            <aside class="left-panel">
                <img src="assets/mha_ispoc-uAwSrX-U.png" alt="MHA iSPoC logo" class="sidebar-logo" />
            </aside>
            <main class="center-panel">
                <div class="workflow-container">
                    <h1 class="workflow-title">üîÑ Automated Policy Processing Workflow</h1>

        <div class="demo-section">
            <div class="draggable-document" id="draggableDoc" draggable="true">
                <div class="doc-icon">üìÑ</div>
                <div class="doc-name">New_Policy_v2.docx</div>
                <div class="doc-hint">Drag me to SharePoint!</div>
            </div>
        </div>

        <div class="workflow">
            <!-- Trigger Node -->
            <div class="node trigger" id="sharepointNode" data-tooltip="Monitors SharePoint for new or updated policy documents">
                <div class="status-indicator"></div>
                <div class="node-icon">üìÅ</div>
                <div class="node-title">SharePoint Trigger</div>
                <div class="node-description">
                    Watches 'Policy Library'<br>
                    Detects <strong>new/updated</strong> .docx files only
                </div>
            </div>

            <div class="connection" id="connection1"></div>

            <!-- Action Node -->
            <div class="node action" data-tooltip="Automatically initiates the processing pipeline">
                <div class="node-icon">‚ö°</div>
                <div class="node-title">Power Automate ‚Üí HTTP Request</div>
                <div class="node-description">
                    Starts Azure job automatically<br>
                    Sends file name + path
                </div>
            </div>

            <div class="connection" id="connection2"></div>

            <!-- Processing Node -->
            <div class="node processing" data-tooltip="Handles all the complex data processing tasks">
                <div class="node-icon">‚öôÔ∏è</div>
                <div class="node-title">Azure Container Apps Job</div>
                <div class="node-description">
                    ‚Ä¢ Converts and validates files<br>
                    ‚Ä¢ Generates AI questions<br>
                    ‚Ä¢ Combines & reconciles indexes
                </div>
            </div>

            <div class="connection" id="connection3"></div>

            <!-- Final Nodes -->
            <div class="final-nodes">
                <div class="node vector" data-tooltip="Updates the knowledge base with new policy information">
                    <div class="node-icon">üß†</div>
                    <div class="node-title">Vector Store</div>
                    <div class="node-description">
                        Upsert to vector store<br>
                        Real-time updates
                    </div>
                </div>

                <div class="node notification" data-tooltip="Keeps the team informed of updates">
                    <div class="node-icon">üì¢</div>
                    <div class="node-title">Notifications</div>
                    <div class="node-description">
                        Teams/Email alerts<br>
                        Update confirmations
                    </div>
                </div>

                <div class="node final" data-tooltip="Staff can immediately query the updated policies">
                    <div class="node-icon">üîç</div>
                    <div class="node-title">iSPoC Updated</div>
                    <div class="node-description">
                        Staff query latest info<br>
                        No manual updates needed
                    </div>
                </div>
            </div>
        </div>
                </div>
            </main>
            <aside class="right-panel">
                <div class="explanation">
                    <h3>üõ†Ô∏è Tools</h3>
                    <div class="explanation-grid">
                        <div class="explanation-item">
                            <strong>üìÅ SharePoint</strong>
                            <span>Where policies are stored. Like a filing cabinet that watches itself.</span>
                        </div>
                        <div class="explanation-item">
                            <strong>‚ö° Power Automate</strong>
                            <span>Detects changes and kicks off the process automatically. Like a smart assistant.</span>
                        </div>
                        <div class="explanation-item">
                            <strong>‚öôÔ∏è Azure</strong>
                            <span>Does all the heavy lifting ‚Äî converting, validating, and preparing data.</span>
                        </div>
                        <div class="explanation-item">
                            <strong>üß† Vector Store</strong>
                            <span>The "brain" that powers iSPoC search. Makes information findable.</span>
                        </div>
                        <div class="explanation-item">
                            <strong>üì¢ Notifications</strong>
                            <span>Keeps everyone informed when updates happen automatically.</span>
                        </div>
                        <div class="explanation-item">
                            <strong>üîç iSPoC</strong>
                            <span>Staff see updates instantly without any manual effort required.</span>
                        </div>
                    </div>
                </div>
            </aside>
        </div>

    <script>
        // Get elements
        const draggableDoc = document.getElementById('draggableDoc');
        const sharepointNode = document.getElementById('sharepointNode');
        const nodes = document.querySelectorAll('.node');
        const connections = document.querySelectorAll('.connection');

        // Drag start
        draggableDoc.addEventListener('dragstart', function(e) {
            this.classList.add('dragging');
            e.dataTransfer.setData('text/plain', 'document');
        });

        // Drag end
        draggableDoc.addEventListener('dragend', function(e) {
            this.classList.remove('dragging');
        });

        // SharePoint node drag events
        sharepointNode.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('drop-target');
        });

        sharepointNode.addEventListener('dragleave', function(e) {
            this.classList.remove('drop-target');
        });

        // Handle drop on SharePoint node
        sharepointNode.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('drop-target');
            
            // Check if it's our document
            if (e.dataTransfer.getData('text/plain') === 'document') {
                simulateWorkflow();
            }
        });

        function simulateWorkflow() {
            // Reset all nodes and connections
            nodes.forEach(node => {
                node.classList.remove('processing');
                node.classList.remove('drop-target');
            });
            connections.forEach(conn => conn.classList.remove('active'));

            // Hide the draggable document temporarily
            draggableDoc.style.opacity = '0.3';
            draggableDoc.style.pointerEvents = 'none';

            // Simulate the workflow step by step
            setTimeout(() => {
                // SharePoint trigger
                nodes[0].classList.add('processing');
            }, 300);

            setTimeout(() => {
                // Connection 1 active
                document.getElementById('connection1').classList.add('active');
                // Power Automate
                nodes[1].classList.add('processing');
            }, 1000);

            setTimeout(() => {
                // Connection 2 active
                document.getElementById('connection2').classList.add('active');
                // Azure processing
                nodes[2].classList.add('processing');
            }, 2000);

            setTimeout(() => {
                // Connection 3 active
                document.getElementById('connection3').classList.add('active');
                // Final nodes
                nodes[3].classList.add('processing');
                nodes[4].classList.add('processing');
                nodes[5].classList.add('processing');
            }, 3500);

            setTimeout(() => {
                // Reset everything
                nodes.forEach(node => node.classList.remove('processing'));
                connections.forEach(conn => conn.classList.remove('active'));
                
                // Show the draggable document again
                draggableDoc.style.opacity = '1';
                draggableDoc.style.pointerEvents = 'auto';
            }, 5500);
        }

        // Add interactive tooltips and hover effects
        document.querySelectorAll('.node').forEach(node => {
            node.addEventListener('mouseenter', function() {
                const tooltip = this.getAttribute('data-tooltip');
                if (tooltip && !this.classList.contains('processing')) {
                    this.style.transform = 'translateY(-4px) scale(1.02)';
                }
            });

            node.addEventListener('mouseleave', function() {
                if (!this.classList.contains('processing') && !this.classList.contains('drop-target')) {
                    this.style.transform = 'translateY(0) scale(1)';
                }
            });
        });

        // Click on document as backup interaction
        draggableDoc.addEventListener('click', function() {
            simulateWorkflow();
        });
    </script>
</body>
</html>

